<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Player Targets Chart</title>
    <script src="https://cdn.plot.ly/plotly-latest.min.js"></script>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Montserrat:wght@400;700&display=swap');
        body {
            font-family: 'Montserrat', sans-serif;
            margin: 20px;
            background-color: #f4f4f4;
            color: #333;
        }
        select {
            font-family: 'Montserrat', sans-serif;
            padding: 10px;
            margin-bottom: 20px;
            border-radius: 5px;
            border: 1px solid #ccc;
            background-color: white;
        }
        label {
            font-size: 16px;
            margin-right: 10px;
        }
        #chart {
            width: 100%;
            height: 600px;  /* Fixed vertical height */
        }
    </style>
</head>
<body>

<div id="chart"></div>

<script>
    var data = [
        { player: 'CeeDee Lamb', targets: 31, team: 'DAL' },
        { player: 'Davante Adams', targets: 29, team: 'LVR' },
        { player: 'Calvin Ridley', targets: 26, team: 'JAX' },
        { player: 'Tyreek Hill', targets: 24, team: 'MIA' },
        { player: 'Jake Ferguson', targets: 23, team: 'DAL' },
        { player: 'D.K. Metcalf', targets: 23, team: 'SEA' },
        { player: 'Amon-Ra St. Brown', targets: 23, team: 'DET' },
        { player: 'Rashee Rice', targets: 22, team: 'KAN' },
        { player: 'Ja\'Marr Chase', targets: 19, team: 'CIN' },
        { player: 'Travis Kelce', targets: 19, team: 'KAN' },
        { player: 'Michael Pittman', targets: 19, team: 'IND' },
        { player: 'Romeo Doubs', targets: 18, team: 'GNB' },
        { player: 'Cooper Kupp', targets: 18, team: 'LAR' },
        { player: 'DeAndre Hopkins', targets: 17, team: 'TEN' },
        { player: 'David Njoku', targets: 17, team: 'CLE' },
        { player: 'Deebo Samuel', targets: 17, team: 'SFO' },
        { player: 'Courtland Sutton', targets: 17, team: 'DEN' },
        { player: 'Garrett Wilson', targets: 17, team: 'NYJ' }
    ];

    var teamColors = {
        'DAL': '#003594',
        'LVR': '#000000',
        'JAX': '#006778',
        'MIA': '#008E97',
        'SEA': '#002244',
        'DET': '#0076B6',
        'KAN': '#E31837',
        'CIN': '#FB4F14',
        'IND': '#002C5F',
        'GNB': '#203731',
        'LAR': '#003594',
        'TEN': '#0C2340',
        'CLE': '#311D00',
        'SFO': '#AA0000',
        'DEN': '#FB4F14',
        'NYJ': '#125740'
    };

    var teams = ['All Teams', ...new Set(data.map(item => item.team))];

    function plotChart(team) {
        var filteredData = team === 'All Teams' ? data : data.filter(item => item.team === team);
        filteredData.sort((a, b) => b.targets - a.targets);

        // Concatenate player and team names for y-axis
        var yLabels = filteredData.map(item => `${item.player} (${item.team})`);

        var trace = {
            y: yLabels,  // Use concatenated labels for y-axis
            x: filteredData.map(item => item.targets),
            text: filteredData.map(item => item.targets),  // Display targets outside the bar
            type: 'bar',
            orientation: 'h',
            marker: {
                color: filteredData.map(item => teamColors[item.team]),
                line: {
                    color: 'white',
                    width: 2
                }
            },
            texttemplate: '%{text}',  // Show target numbers outside
            textposition: 'outside',
            hoverinfo: 'text+x',
            hovertext: filteredData.map(item => `${item.player} (${item.team})<br>Targets: ${item.targets}`),
        };

        var layout = {
            title: {
                text: 'Red Zone Targets',
                font: {
                    size: 24,
                    family: 'Montserrat, sans-serif'
                },
            },
            margin: {
                l: window.innerWidth < 600 ? 120 : 200,  // Adjust left margin based on screen width
                r: 30,  // Reduce right margin for smaller screens
                t: 50,
                b: 50
            },
            paper_bgcolor: '#f4f4f4',
            plot_bgcolor: '#f4f4f4',
            yaxis: {
                title: '',
                autorange: "reversed",
                tickfont: {
                    size: 14,
                    color: 'black'
                },
                showgrid: false
            },
            xaxis: {
                title: '',
                tickfont: {
                    size: 14,
                    color: 'darkgrey'
                },
                showgrid: false,
                zeroline: false
            },
            font: {
                family: 'Montserrat, sans-serif',
                color: '#333'
            },
            autosize: true,  // Make it responsive to screen size
        };

        Plotly.newPlot('chart', [trace], layout, {responsive: true});  // Ensure responsiveness
    }

    plotChart('All Teams');

    document.body.insertAdjacentHTML('afterbegin', `
        <label for="team-select">Choose a team:</label>
        <select id="team-select" onchange="plotChart(this.value)">
            ${teams.map(team => `<option value="${team}">${team}</option>`).join('')}
        </select>
    `);
</script>

</body>
</html>
